<div class="jumbotron row">
  <div class="col-md-6 col-md-offset-1">
    <%= form_for(@comp_application,
                 :multipart => true,
                 :html => {:class => "form-horizontal left fullscreen_form" }) do | f| %>

        <%= f.hidden_field :competition_id, :value => @comp_application.competition.id %>


        <%= render 'application/error_messages', object: f.object %>

        <div class="form-group">
          <%= f.label t('competition.name_of_character')  %>
          <%= f.text_field :character_name %>
        </div>

        <div class="form-group">
          <%= f.label t('competition.source_of_character')  %>
          <%= f.text_field :character_source %>
          <i><%= t('competition.user_side.fandom_explained') %></i>
        </div>

        <div class="form-group">
          <%= f.label t('competition.primary_image') %>
          <% if @comp_application.primary_image.present? %>
              <%= image_tag (@comp_application.primary_image.url(:medium)) %>
          <% end %>
          <%= f.file_field :primary_image %>
          <i><%= t('competition.user_side.primary_image_explained') %></i>
        </div>

        <div class="form-group">
          <%= f.label t('competition.stage_music') %>
          <% if @comp_application.stage_music.present? %>
              <%= link_to @comp_application.stage_music_file_name, (@comp_application.stage_music.url(:medium)) %>
          <% end %>
          <%= f.file_field :stage_music %>
          <i><%= t('competition.user_side.stage_music_explained') %></i>
        </div>

        <% if @comp_application.competition.extra_images?  %>
            <div class="form-group">
              <%= f.label t('competition.extra_image')  %>
              <% if @comp_application.extra_image1.present? %>
                  <%= image_tag (@comp_application.extra_image1.url(:medium)) %>
              <% end %>
              <% if @comp_application.extra_image2.present? %>
                  <%= image_tag (@comp_application.extra_image2.url(:medium)) %>
              <% end %>
              <%= f.file_field :extra_image1 %>
              <%= f.file_field :extra_image2 %>
              <i><%= t('competition.user_side.extra_images_explained') %></i>
            </div>
        <% end %>


        <% if @comp_application.competition.group_members? %>
            <% group_size = @comp_application.competition.max_group_size || 10
               for i in 2 .. group_size
                 # We iterate from 2, because the user itself is the first group member.
            %>
                <div class="form-group">
                  <%= f.label t('competition.group_member_name')  %>
                  <%= f.text_field :group_members, value: @comp_application.group_members[i-2], multiple: true %>
                </div>
            <% end %>
        <% end %>

        <% if @comp_application.competition.perf_requests?  %>
            <div class="form-group">
              <%= f.label t('competition.perf_requests')  %>
              <%= f.text_area :perf_requests %>
              <i><%= t('competition.user_side.perf_requests_explained') %></i>
            </div>
        <% end %>


        <div class="form-group">
          <%= f.label t('competition.veteran') %>
          <%= f.check_box :veteran %>
          <i><%= t('competition.user_side.veteran_explained') %></i>
        </div>

        <%= f.submit t('competition.user_side.send_app_button'), class: "btn btn-primary" %>

    <% end %>
  </div>

</div>
